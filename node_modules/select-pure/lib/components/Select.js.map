{"version":3,"file":"Select.js","sourceRoot":"","sources":["../../src/components/Select.ts"],"names":[],"mappings":"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","sourcesContent":["import { css, LitElement, html } from \"lit\";\nimport { ifDefined } from \"lit-html/directives/if-defined.js\";\nimport { customElement } from \"lit/decorators/custom-element.js\";\nimport { property } from \"lit/decorators/property.js\";\n\nimport { KEYS } from \"./constants\";\nimport { Option, OptionPureElement } from \"./../models\";\n\n// eslint-disable-next-line\nconst noop = () => {};\nconst defaultOption = {\n  label: \"\",\n  value: \"\",\n  select: noop,\n  unselect: noop,\n  disabled: false,\n  hidden: false,\n  selected: false,\n};\n\n@customElement(\"select-pure\")\nexport class SelectPure extends LitElement {\n  static get styles() {\n    return css`\n      .select-wrapper {\n        position: relative;\n      }\n      .select {\n        bottom: 0;\n        display: flex;\n        flex-wrap: wrap;\n        left: 0;\n        position: absolute;\n        right: 0;\n        top: 0;\n        width: var(--select-width, 100%);\n      }\n      .label:focus {\n        outline: var(--select-outline, 2px solid #e3e3e3);\n      }\n      .label:after {\n        border-bottom: 1px solid var(--color, #000);\n        border-right: 1px solid var(--color, #000);\n        box-sizing: border-box;\n        content: \"\";\n        display: block;\n        height: 10px;\n        margin-top: -2px;\n        transform: rotate(45deg);\n        transition: 0.2s ease-in-out;\n        width: 10px;\n      }\n      .label.visible:after {\n        margin-bottom: -4px;\n        margin-top: 0;\n        transform: rotate(225deg);\n      }\n      select {\n        -webkit-appearance: none;\n        -moz-appearance: none;\n        appearance: none;\n        position: relative;\n        opacity: 0;\n      }\n      select[multiple] {\n        z-index: 0;\n      }\n      select,\n      .label {\n        align-items: center;\n        background-color: var(--background-color, #fff);\n        border-radius: var(--border-radius, 4px);\n        border: var(--border-width, 1px) solid var(--border-color, #000);\n        box-sizing: border-box;\n        color: var(--color, #000);\n        cursor: pointer;\n        display: flex;\n        font-family: var(--font-family, inherit);\n        font-size: var(--font-size, 14px);\n        font-weight: var(--font-weight, 400);\n        min-height: var(--select-height, 44px);\n        justify-content: space-between;\n        padding: var(--padding, 0 10px);\n        width: 100%;\n        z-index: 1;\n      }\n      @media only screen and (hover: none) and (pointer: coarse){\n        select {\n          z-index: 2;\n        }\n      }\n      .dropdown {\n        background-color: var(--border-color, #000);\n        border-radius: var(--border-radius, 4px);\n        border: var(--border-width, 1px) solid var(--border-color, #000);\n        display: none;\n        flex-direction: column;\n        gap: var(--border-width, 1px);\n        justify-content: space-between;\n        max-height: calc(var(--select-height, 44px) * 4 + var(--border-width, 1px) * 3);\n        overflow-y: scroll;\n        position: absolute;\n        top: calc(var(--select-height, 44px) + var(--dropdown-gap, 0px));\n        width: calc(100% - var(--border-width, 1px) * 2);\n        z-index: var(--dropdown-z-index, 2);\n      }\n      .dropdown.visible {\n        display: flex;\n        z-index: 100;\n      }\n      .disabled {\n        background-color: var(--disabled-background-color, #bdc3c7);\n        color: var(--disabled-color, #ecf0f1);\n        cursor: default;\n      }\n      .multi-selected {\n        background-color: var(--selected-background-color, #e3e3e3);\n        border-radius: var(--border-radius, 4px);\n        color: var(--selected-color, #000);\n        display: flex;\n        gap: 8px;\n        justify-content: space-between;\n        padding: 2px 4px;\n      }\n      .multi-selected-wrapper {\n        display: flex;\n        flex-wrap: wrap;\n        gap: 4px;\n        width: calc(100% - 30px);\n      }\n      .cross:after {\n        content: '\\\\00d7';\n        display: inline-block;\n        height: 100%;\n        text-align: center;\n        width: 12px;\n      }\n    `;\n  }\n\n  @property() options: Option[] = [];\n\n  @property() visible: boolean = false;\n\n  @property() selectedOption: Option = defaultOption;\n\n  @property() _selectedOptions: Option[] = [];\n\n  @property() disabled: boolean = this.getAttribute(\"disabled\") !== null;\n\n  @property() _multiple: boolean = false;\n\n  @property() name: string = this.getAttribute(\"name\") || \"\";\n\n  @property() _id: string = \"\";\n\n  @property() formName: string = \"\";\n\n  @property() value: string = \"\";\n\n  @property() values: string[] = [];\n\n  @property() defaultLabel: string = \"\";\n\n  @property() _optionsLength: number = -1;\n\n  private nativeSelect: HTMLSelectElement | null = null;\n\n  private form: HTMLFormElement | null = null;\n\n  private hiddenInput: HTMLInputElement | null = null;\n\n  constructor() {\n    super();\n\n    // bindings\n    this.close = this.close.bind(this);\n    this.onSelect = this.onSelect.bind(this);\n    this.processOptions = this.processOptions.bind(this);\n    this.processForm = this.processForm.bind(this);\n    this.removeEventListeners = this.removeEventListeners.bind(this);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    // set properties\n    this.disabled = this.getAttribute(\"disabled\") !== null;\n    this._multiple = this.getAttribute(\"multiple\") !== null;\n    this.name = this.getAttribute(\"name\") || \"\";\n    this._id = this.getAttribute(\"id\") || \"\";\n    this.formName =this.name || this.id;\n    this.defaultLabel = this.getAttribute(\"default-label\") || \"\";\n  }\n\n  public open() {\n    if (this.disabled) {\n      return;\n    }\n    this.visible = true;\n    this.removeEventListeners();\n    document.body.addEventListener(\"click\", this.close, true);\n  }\n\n  public close(event?: Event) {\n    // @ts-ignore\n    if (event && this.contains(event.target)) {\n      return;\n    }\n    this.visible = false;\n    this.removeEventListeners();\n  }\n\n  public enable() {\n    this.disabled = false;\n  }\n\n  public disable() {\n    this.disabled = true;\n  }\n\n  get selectedIndex(): number | undefined {\n    return this.nativeSelect?.selectedIndex;\n  }\n\n  set selectedIndex(index: number | undefined) {\n    if (!index && index !== 0) {\n      return;\n    }\n    this.onSelect(this.options[index].value);\n  }\n\n  get selectedOptions() {\n    return this.nativeSelect?.selectedOptions;\n  }\n\n  private removeEventListeners() {\n    document.body.removeEventListener(\"click\", this.close);\n  }\n\n  private processForm() {\n    this.form = this.closest(\"form\");\n    if (!this.form) {\n      return;\n    }\n    this.hiddenInput = document.createElement(\"input\");\n    this.hiddenInput.setAttribute(\"type\", \"hidden\");\n    this.hiddenInput.setAttribute(\"name\", this.formName);\n    this.form.appendChild(this.hiddenInput);\n  }\n\n  private handleNativeSelectChange() {\n    this.selectedIndex = this.nativeSelect?.selectedIndex;\n  }\n\n  private processOptions() {\n    // @ts-ignore\n    this.nativeSelect = this.shadowRoot.querySelector(\"select\");\n    const options = this.querySelectorAll(\"option-pure\");\n    this._optionsLength = options.length;\n    for (let i = 0; i < options.length; i++) {\n      const currentOption = options[i] as OptionPureElement;\n      currentOption.setOnSelectCallback(this.onSelect);\n      this.options[i] = currentOption.getOption();\n      if (this.options[i].selected) {\n        this.onSelect(this.options[i].value);\n      }\n      if (i === this._optionsLength - 1 && !this.selectedOption.value && !this._multiple) {\n        this.selectOption(this.options[0], true);\n      }\n    }\n    this.processForm();\n  }\n\n  private onSelect(optionValue: string) {\n    for (let i = 0; i < this.options.length; i++) {\n      const option = this.options[i];\n      if (option.value === optionValue) {\n        this.selectOption(option);\n        continue;\n      }\n      if (!this._multiple) {\n        option.unselect();\n      }\n    }\n    if (!this._multiple) {\n      this.close();\n    }\n  }\n\n  private selectOption(option: Option, isInitialRender?: boolean) {\n    if (this._multiple) {\n      const isSelected = this._selectedOptions.find(({ value }) => value === option.value);\n      if (isSelected) {\n        const selectedIndex = this._selectedOptions.indexOf(isSelected);\n        this.values.splice(selectedIndex, 1);\n        this._selectedOptions.splice(selectedIndex, 1);\n        option.unselect();\n      } else {\n        this.values.push(option.value);\n        this._selectedOptions.push(option);\n        option.select();\n      }\n      this.requestUpdate();\n    } else {\n      this.selectedOption = option;\n      this.value = option.value;\n      option.select();\n    }\n    if (this.form && this.hiddenInput) {\n      this.hiddenInput.value = this._multiple ? this.values.join(\",\") : this.value;\n      const event = new Event(\"change\", { bubbles: true });\n      this.hiddenInput.dispatchEvent(event);\n    }\n    if (isInitialRender) {\n      return;\n    }\n    this.afterSelect();\n  }\n\n  private afterSelect() {\n    this.dispatchEvent(new Event(\"change\"));\n  }\n\n  private handleKeyPress(event: KeyboardEvent) {\n    if (event.which === KEYS.ENTER || event.which === KEYS.TAB) {\n      this.open();\n    }\n  }\n\n  private onCrossClick(event: Event, value: string) {\n    event.stopPropagation();\n    this.onSelect(value);\n  }\n\n  private renderNativeOptions() {\n    return this.options.map(({ value, label, hidden, disabled }) => {\n      let isSelected = this.selectedOption.value === value;\n      if (this._multiple) {\n        isSelected = Boolean(this._selectedOptions.find(option => option.value === value));\n      }\n      return html`\n        <option\n          value=${value}\n          ?selected=${isSelected}\n          ?hidden=${hidden}\n          ?disabled=${disabled}\n        >\n          ${label}\n        </option>\n      `;\n    });\n  }\n\n  private renderLabel() {\n    if (this._multiple && this._selectedOptions.length) {\n      return html`\n        <div class=\"multi-selected-wrapper\">\n          ${this._selectedOptions.map(({ label, value }) => html`\n              <span class=\"multi-selected\">\n                ${label}\n                <span class=\"cross\" @click=${(event: Event) => this.onCrossClick(event, value)}></span>\n              </span>\n          `)}\n        </div>\n      `;\n    }\n\n    return this.selectedOption.label || this.defaultLabel;\n  }\n\n  render() {\n    const labelClassNames = [\"label\"];\n    if (this.disabled) {\n      labelClassNames.push(\"disabled\");\n    }\n    if (this.visible) {\n      labelClassNames.push(\"visible\");\n    }\n    return html`\n      <div class=\"select-wrapper\">\n        <select\n          @change=${this.handleNativeSelectChange}\n          ?disabled=${this.disabled}\n          ?multiple=${this._multiple}\n          name=\"${ifDefined(this.name || undefined)}\"\n          id=${ifDefined(this.id || undefined)}\n          size=\"1\"\n        >\n          ${this.renderNativeOptions()}\n        </select>\n\n        <div class=\"select\">\n          <div\n            class=\"${labelClassNames.join(\" \")}\"\n            @click=\"${this.visible ? this.close : this.open}\"\n            @keydown=\"${this.handleKeyPress}\"\n            tabindex=\"0\"\n          >\n            ${this.renderLabel()}\n          </div>\n          <div class=\"dropdown${this.visible ? \" visible\" : \"\"}\">\n            <slot @slotchange=${this.processOptions}></slot>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n}\n"]}